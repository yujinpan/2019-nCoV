(function(e){function t(t){for(var r,c,i=t[0],u=t[1],l=t[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/2019-nCoV/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;o.push([1,"chunk-vendors"]),n()})({0:function(e,t){},1:function(e,t,n){e.exports=n("56d7")},2:function(e,t){},"2af9":function(e,t){},3:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full-height padding-large",attrs:{id:"app"}},[n("ve-line",{attrs:{height:"100%",extend:e.chartExtend,data:e.chartData}})],1)},o=[],c=(n("6762"),n("2fdb"),n("a481"),n("c5f6"),n("4917"),n("55dd"),n("1c4c"),n("456d"),n("5df3"),n("4f7f"),n("bd86")),i=(n("7514"),n("ac6a"),n("bc3a")),u=n.n(i),l=n("4328"),s={"Failed to execute query":"执行查询失败","Network Error":"网络连接失败","timeout of":"网络连接超时"},f=Object.keys(s);function d(e){var t=f.find((function(t){return e.includes(t)}));return t?s[t]:""}var p={info:console.info,error:console.error,warning:console.warn,success:console.log};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r["default"].prototype.$message;return p[e]&&p[e]("[".concat(e,"]:"),t),a&&(t=m(t),n&&(t="".concat(n,"（").concat(t,"）")),h._messageRef&&h._messageRef.close(),h._messageRef=o({message:t,type:e,duration:6e3,showClose:!0})),t}h.bind(null,"info"),h.bind(null,"success");var v=h.bind(null,"error"),b=h.bind(null,"warning");function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return t--,e&&(e.error&&(e=e.error),e.message&&(e=e.message)),e=t&&e instanceof Object&&!(e instanceof Error)?m(e,t):String(e),e=d(e)||e,e=e.length>80?e.slice(0,80)+"...":e,e}n("7f7f");var g=n("d225"),w=n("b0b4"),y=function(){function e(t){Object(g["a"])(this,e),Object(c["a"])(this,"name","");var n=e._existNames;if(n.includes(t))throw"本地缓存错误：".concat(t," 名称重复");n.push(t),this.name=t}return Object(w["a"])(e,[{key:"update",value:function(e){var t=this.get();t&&t instanceof Object&&e instanceof Object&&(e=Object.assign(t,e)),this.set(e)}},{key:"get",value:function(){var e=O(this.name);return e&&(e.expires>Date.now()||!e.expires)?e:(this.clear(),null)}},{key:"set",value:function(e){j(this.name,e)}},{key:"clear",value:function(){x(this.name)}}]),e}();function O(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t}function j(e,t){localStorage.setItem(e,JSON.stringify(t))}function x(e){localStorage.removeItem(e)}y._existNames=[];var k=new y("USER_DATA"),_=(new y("APP_DATA"),null),E=u.a.create({baseURL:"/2019-nCoV/dist/",timeout:2e4,validateStatus:function(e){return e>=200&&e<=500}}),N=E;function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"服务异常";return e instanceof u.a.Cancel||v(e||t,"",!0),Promise.reject(e)}E.interceptors.request.use((function(e){var t=u.a.CancelToken.source();if(e.cancelToken=t.token,_&&!_.includes(e.url)){var n=k.get();n?e.headers.token=n.token:(b("请求已取消(未获取到 token)："+e.url),t.cancel("Cancel"))}return"post"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=Object(l["stringify"])(e.data)),e}),(function(e){return S(e,"请求错误")})),E.interceptors.response.use((function(e){var t=e.data;return t&&!t.error&&!1!==t.success?t:t.tokenInvalid?(v("登陆已过期，请重新登陆"),k.clear(),void(location.href="/login")):S(t)}),S);var $=n("1146"),C=(window.CONFIG,{wikipedia:{detail:"/table.txt"}});function T(){return N({url:C.wikipedia.detail}).then((function(e){var t=document.createElement("div");t.innerHTML=e;var n,r,a=P(t),o=[];a.forEach((function(e){e.data.forEach((function(t){n=o.find((function(e){return t.date===e.date})),r=Object(c["a"])({date:t.date},e.area,t.count),n?Object.assign(n,r):o.push(r)}))}));var i=new Set;o.forEach((function(e){return Object.keys(e).forEach((function(e){return i.add(e)}))}));var u=Array.from(i);o.forEach((function(e,t,n){u.forEach((function(r){!e[r]&&t>0&&(e[r]=n[t-1][r])}))})),o.forEach((function(e){e["总数"]=u.slice(1).reduce((function(t,n){return t+(e[n]||0)}),0)})),u.splice(1,0,"总数");var l=o.slice(-1)[0];return u.sort((function(e,t){return l[t]-l[e]})),{columns:u,data:o.sort((function(e,t){return new Date(e.date)-new Date(t.date)}))}}))}function P(e){var t=$["utils"].table_to_sheet(e,{raw:!0}),n=$["utils"].sheet_to_json(t),r=[];n.forEach((function(e,t,n){e["病例报告"]||(e["病例报告"]=n[t-1]["病例报告"]),e["病患地区"]||(e["病患地区"]=n[t-1]["病患地区"]),e["报告日期"]?r.push(e):n[t-1]["病例报告"]+=e["病例报告"]}));var a,o,c,i=[];return r.forEach((function(e){c=A(e["病例报告"]),c>0&&(o={date:e["报告日期"],count:c},i.length&&e["病患地区"]===i.slice(-1)[0].area?a.data.push(o):(a={area:e["病患地区"].trim(),data:[o]},i.push(a)))})),i}function A(e){var t,n=e.match(/累计(\d+)例/g);if(n){var r=Number(n.slice(-1)[0].replace(/.*累计(\d+)例.*/,"$1"));if(r>0)return r}return t=Number(e.replace(/.*(\d+)例确诊病例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*确诊(\d+)例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*确诊病例达(\d+)例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*累计确诊病例达(\d+)例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*累计报告病例(\d+)例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*累计报告(\d+)例.*/,"$1")),t>0?t:(t=Number(e.replace(/.*累计个案增至(\d+)宗.*/,"$1")),t>0?t:e.includes("1例输入性病例")||e.includes("第一例确诊病例")||e.includes("首例确诊")||e.includes("首宗确诊")||e.includes("神奈川县，30+岁中华人民共和国籍男性")||e.includes("确认为新型冠状病毒")?(t=Number(e.replace(/.*新增(\d+)例.*/,"$1")),t>0?t+1:1):e.includes("74岁中华人民共和国籍女子，其于1月13日抵达泰国")||e.includes("确诊第二例")||e.includes("出现第二例确诊病例")?2:void 0))))))}(function(){var e=Array.from(document.querySelectorAll("caption")).find((function(e){return"2019～2020新型冠状病毒(2019-nCoV)各地疫情报告"===e.innerText}));e&&console.log(e.parentNode.outerHTML)})();var D={name:"app",data:function(){return{chartExtend:{color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#c4ccd3"],series:{label:{normal:{show:!0}}},title:{text:"2019-nCoV 确诊病例统计",subtext:"（数据来源：维基百科 2019－2020年新型冠狀病毒肺炎事件）",sublink:"https://zh.wikipedia.org/wiki/2019－2020年新型冠狀病毒肺炎事件",left:"center"},grid:{top:100,right:150,bottom:0},tooltip:{confine:!0},legend:{top:40,type:"scroll",orient:"vertical",right:0},xAxis:{axisLabel:{rotate:45}}},chartData:{columns:[],rows:[]}}},mounted:function(){var e=this;T().then((function(t){var n=t.data,r=t.columns;e.chartData.columns=r,e.chartData.rows=n}))}},M=D,I=(n("9094"),n("2877")),R=Object(I["a"])(M,a,o,!1,null,"81eeded2",null),J=R.exports,L=(n("2af9"),n("0fb7"),n("450d"),n("f529")),V=n.n(L),q=(n("be4f"),n("896a")),F=n.n(q),H=(n("1951"),n("eedf")),U=n.n(H);r["default"].use(U.a),r["default"].use(F.a.directive),r["default"].prototype.$loading=F.a.service,r["default"].prototype.$message=V.a;var z=n("c3da"),G=n.n(z);n("0b4b"),n("d28f"),n("627c");r["default"].component(G.a.name,G.a);n("b20f");r["default"].config.productionTip=!1,new r["default"]({el:"#app",render:function(e){return e(J)}})},9094:function(e,t,n){"use strict";var r=n("f83d"),a=n.n(r);a.a},b20f:function(e,t,n){},f83d:function(e,t,n){}});